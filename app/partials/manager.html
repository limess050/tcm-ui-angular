<link rel="stylesheet" href="assets/css/manager.css">
<div ng-controller="TopMenuCntl">
    <ng-include src="topmenu"></ng-include>
</div>
<div class="manager">

<!-- separate into directive -->

	<ol class="breadcrumb release-iteration-selector">
		<li>
			<a href="" ng-click="release.open = true">Release {{release.releaseName}}<!-- <span class="caret" ng-click="release.open = true"></span> --></a>
			<div class="btn-group" ng-class="(release.open == true)?'open':''" style=" position: absolute; ">
				<ul class="dropdown-menu" role="menu" ng-mouseleave="release.open = false">
					<li ng-repeat="rel in releases" ng-click="selectRelease(rel)"><a href="">{{rel.releaseName}}</a></li>
				</ul>
			</div>
		</li>
		<li ng-show="iterations.length > 0">
			<a href="" ng-click="iteration.open = true">{{iteration.iterationName}}<!-- <span class="caret" ng-click="iteration.open = true"></span> --></a>
			<div class="btn-group" ng-class="(iteration.open == true)?'open':''" style=" position: absolute; ">
				<ul class="dropdown-menu" role="menu" ng-mouseleave="iteration.open = false">
					<li ng-repeat="iter in iterations" ng-click="selectIteration(iter)"><a href="">{{iter.iterationName}}</a></li>
				</ul>
			</div>
		</li>
	</ol>

<!-- separate into directive -->

	<div class="panels">
		<div class="panel panel-default panel-tcm">
		  <div class="panel-body panel-body-tcm">
		    <div class="well action-bar">
		    	<div class="btn-group btn-group-xs pull-right">
		    		<div class="btn" ng-show="iteration.IterId != null"><span class="glyphicon glyphicon-plus-sign"></span></div>
		    	</div>
		    </div>

<!-- FEATURE -->
				<div ng-repeat="feature in features" class="panel panel-default feature" ng-class="(feature.current == true)?'active':''" id="{{feature.featureId}}" ng-click="getTestCases(feature)">
				  <div class="panel-heading panel-heading-tcm">
				  	{{feature.jiraKey}}
				  		<div class="closed" ng-show="feature.state == 0"><span class="glyphicon " ng-class="(feature.total == feature.pass)?'glyphicon-thumbs-up':'glyphicon-warning-sign'"></span></div>
						<div class="btn-group btn-group-xs pull-right">
						    <div class="btn no-opacity" ng-show="feature.editMode"><span class="glyphicon glyphicon-remove-circle" ng-click="$event.stopPropagation(); cancelEditFeature(feature, element);"></span></div>
							<div class="btn" ng-hide="feature.editMode"><span class="glyphicon glyphicon-pencil" ng-click="$event.stopPropagation(); editFeature(feature)"></span></div>
						    <div class="btn no-opacity" ng-show="feature.editMode"><span class="glyphicon glyphicon-ok-circle" ng-click="$event.stopPropagation(); saveFeature(feature)"></span></div>
							<div class="btn" ng-hide="feature.delete"><span class="glyphicon glyphicon-trash" ng-click="$event.stopPropagation(); feature.delete = true"></span></div>
							<div class="btn btn-danger btn-delete" ng-show="feature.delete" ng-click="deleteFeature(feature)" ng-mouseleave="$event.stopPropagation(); feature.delete = false">{{placeholders.feature.delete}}</div>
						</div>
					</div>
					<div class="progress progress-tcm">
					  	<div class="progress-bar progress-bar-success" role="progressbar" style="width: {{(feature.pass * 100) / feature.total}}%"/>
						<div class="progress-bar progress-bar-warning" role="progressbar" style="width: {{(feature.blocked * 100) / feature.total}}%"/>
						<div class="progress-bar progress-bar-danger" role="progressbar" style="width: {{(feature.failed * 100) / feature.total}}%"/>
						<div class="progress-bar progress-bar-info" role="progressbar" style="width: {{(feature.inprogress * 100) / feature.total}}%"/>
						<div class="progress-bar progress-bar-notrun" role="progressbar" style="width: {{(feature.notrun * 100) / feature.total}}%"/>
					</div>
					<textarea class="panel-body textarea-tcm" ng-class="feature.editMode==true?'editable':''" ng-click="(feature.editMode == true)?$event.stopPropagation():'feature.current == true'" ng-model="feature.featureName" ng-disabled="feature.editMode==false?true:''"></textarea>
				</div>
<!-- FEATURE -->

		  </div>
		</div>
		<div class="panel panel-default panel-tcm">
			<div class="well action-bar">
		    	<div class="btn-group btn-group-xs pull-right">
		    		<div class="btn" ng-hide="featureSelected == false"><span class="glyphicon glyphicon-plus-sign"></span></div>
		    	</div>
			</div>
			<div class="well" ng-show="testcases.length == 0 && featureSelected == true && features.length > 0">No Items Found</div>
			

<!-- TESTCASE -->


			<div class="panel panel-default testcase" ng-class="(tc.current == true)?'active':''" ng-repeat="tc in testcases" ng-click="selectTc(tc)">
				<div class="panel-heading">
					<input class="name" ng-class="tc.editMode==true?'editable':''" ng-model="tc.name" ng-disabled="tc.editMode==false?true:''"/>
					<div class="btn-group btn-group-xs pull-right">
	                    <div class="btn no-opacity" ng-show="tc.editMode"><span class="glyphicon glyphicon-remove-circle" ng-click="$event.stopPropagation(); cancelEditTC(tc, element);"></span></div>
						<div class="btn" ng-hide="tc.editMode"><span class="glyphicon glyphicon-pencil" ng-click="editTC(tc)"></span></div>
	                    <div class="btn no-opacity" ng-show="tc.editMode"><span class="glyphicon glyphicon-ok-circle" ng-click="$event.stopPropagation(); saveTC(tc)"></span></div>
						<div class="btn" ng-hide="tc.delete"><span class="glyphicon glyphicon-trash" ng-click="$event.stopPropagation(); tc.delete = true"></span></div>
						<div class="btn btn-danger btn-delete" ng-show="tc.delete" ng-click="deleteTC(tc)" ng-mouseleave="$event.stopPropagation(); tc.delete = false">{{placeholders.testcase.delete}}</div>
						
						<tc-status-dropdown test="tc"></tc-status-dropdown>

					</div>
				</div>
				<div class="panel-body" ng-show="tc.current">
					<div class="description-label">Description:</div>
					<textarea class="panel-body textarea-tcm" ng-class="tc.editMode==true?'editable':''" ng-model="tc.description" ng-disabled="tc.editMode==false?true:''"></textarea>
				</div>
				<!-- <div class="panel-footer"  ng-show="tc.current"></div> -->
			</div>

<!-- TESTCASE -->


		  </div>
		</div>
	</div>
</div>